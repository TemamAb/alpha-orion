# Alpha-Orion Unified Render Deployment
# Version: 6.0 - Blueprint with AI Service

services:
  # 1. Unified Frontend + User API Service (Gateway)
  - type: web
    name: alpha-orion-alpha
    env: docker
    plan: starter
    rootDir: .
    envVars:
      - key: NODE_ENV
        value: production
      # Link to the Python AI service. Render handles the URL automatically.
      - key: AI_SERVICE_URL
        fromService:
          type: web
          name: alpha-orion-brain
          property: url
      - key: JWT_SECRET
        generateValue: true
      # Blockchain RPC URLs (Public - No API key needed)
      - key: POLYGON_RPC_URL
        value: https://polygon-rpc.com
      - key: ETHEREUM_RPC_URL
        value: https://eth.llamarpc.com
      - key: ARBITRUM_RPC_URL
        value: https://arb1.arbitrum.io/rpc
      - key: OPTIMISM_RPC_URL
        value: https://mainnet.optimism.io
      - key: BASE_RPC_URL
        value: https://mainnet.base.org
      - key: BSC_RPC_URL
        value: https://bsc-dataseed.binance.org
      - key: WALLET_ADDRESS
        sync: false
      - key: FLASH_LOAN_EXECUTOR_ADDRESS
        sync: false
      - key: PIMLICO_API_KEY
        sync: false
      - key: OPENAI_API_KEY
        sync: false
    healthCheckPath: /health

  # 2. Brain AI Optimization Orchestrator (Python)
  - type: web
    name: alpha-orion-brain
    env: python
    plan: starter
    rootDir: backend-services/services/brain-ai-optimization-orchestrator
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn src.app:app
    envVars:
      - key: PYTHON_VERSION
        value: 3.10.0
      - key: OPENAI_API_KEY
        sync: false
